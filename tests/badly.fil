func asdf():
    print(5)
    return 0.0
end

asdf()
print(6)

func asdf2():
    yield 3  yield 1  yield 4  yield 1  return 5
end

let rv = asdf2()

print(rv[0]) rv = rv[1]()  
print(rv[0]) rv = rv[1]()  
print(rv[0]) rv = rv[1]()  
print(rv[0]) rv = rv[1]()  
print(rv)

print()

let a = [3, 1, 4, 1, 5]
for i in len(a):
    print(a[i])
end

let d = {}
d["a"] = 591
d[5] = 4

print(d["a"])
print(d[5])
print(d[8])

let a2 = keys(d)

print(a2[0])
print(a2[1])
print(a2[2])

for i in len(a2):
    print(a2[i], d[a2[i]])
end

func foreach(x, f):
    let type = typeof(x)
    if type == "array" or type == "string":
        for i in len(x): f(x[i]) end
    elif type == "dict":
        let k = keys(x)
        for i in len(k): f(k[i]) end
    end
end

print()

foreach([6.153, 4, 5, 1, 3, 52.13], lambda[](x):
    print(x)
end )

foreach("Hello!", lambda[](x):
    print(x)
end )

let d = {}
d["a"] = 591
d[5] = 4
d[8] # accessing a dict field automatically fills it with null if it doesn't exist yet

print()

foreach(d, lambda[](x):
    print(x, d[x])
end )

print()

dict_remove(d, 8)

foreach(d, lambda[](x):
    print(x, d[x])
end )

print()

let a = []
array_insert(a, 0, 3.142)
print(a[0])
array_insert(a, 0, 591935.1)
print(a[0], a[1])
array_insert(a, 2, "ahh")
print(a[0], a[1], a[2])

print()

print(array_remove(a, 0))
print(a[0], a[1])
print(array_remove(a, 1))
print(a[0])


let s = "Hello, world!"
let s2 = s

print(s)
print(s2)

s[6] = "_";

print(s)
print(s2)

func a(sq): sq[2] = "Q" print(sq) end
a(s)
print(s)
